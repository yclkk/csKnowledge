(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var aa=this||self;function m(a,b){a=a.split(".");var d=aa;a[0]in d||"undefined"==typeof d.execScript||d.execScript("var "+a[0]);for(var c;a.length&&(c=a.shift());)a.length||void 0===b?d[c]&&d[c]!==Object.prototype[c]?d=d[c]:d=d[c]={}:d[c]=b};var n={},p=null;
function q(a){var b;void 0===b&&(b=0);if(!p){p={};for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),c=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++){var e=d.concat(c[f].split(""));n[f]=e;for(var g=0;g<e.length;g++){var h=e[g];void 0===p[h]&&(p[h]=g)}}}b=n[b];d=Array(Math.floor(a.length/3));c=b[64]||"";for(f=e=0;e<a.length-2;e+=3){var k=a[e],l=a[e+1];h=a[e+2];g=b[k>>2];k=b[(k&3)<<4|l>>4];l=b[(l&15)<<2|h>>6];h=b[h&63];d[f++]=g+k+l+h}g=0;h=c;switch(a.length-e){case 2:g=
a[e+1],h=b[(g&15)<<2]||c;case 1:a=a[e],d[f]=b[a>>2]+b[(a&3)<<4|g>>4]+h+c}return d.join("")};var r="undefined"!==typeof Uint8Array,t={};let u;var v=class{constructor(a){if(t!==t)throw Error("illegal external caller");this.B=a;if(null!=a&&0===a.length)throw Error("ByteString should be constructed with non-empty values");}};const w=Symbol();function x(a,b){if(w)return a[w]|=b;if(void 0!==a.u)return a.u|=b;Object.defineProperties(a,{u:{value:b,configurable:!0,writable:!0,enumerable:!1}});return b}function y(a){let b;w?b=a[w]:b=a.u;return null==b?0:b}function z(a,b){w?a[w]=b:void 0!==a.u?a.u=b:Object.defineProperties(a,{u:{value:b,configurable:!0,writable:!0,enumerable:!1}})}function A(a){x(a,16);return a}function ba(a,b){z(b,(a|0)&-51)}function C(a,b){z(b,(a|18)&-41)};var D={};function E(a){return null!==a&&"object"===typeof a&&!Array.isArray(a)&&a.constructor===Object}const F=[];z(F,23);var G=Object.freeze(F);function H(a){if(y(a.l)&2)throw Error("Cannot mutate an immutable Message");}function I(a){var b=a.length;(b=b?a[b-1]:void 0)&&E(b)?b.g=1:a.push({g:1})};function J(a){const b=a.j+a.s;return a.o||(a.o=a.l[b]={})}function K(a,b,d,c){a.m&&(a.m=void 0);b>=a.j||c?J(a)[b]=d:(a.l[b+a.s]=d,(a=a.o)&&b in a&&delete a[b])}function L(a,b,d){var c=-1===d?null:d>=a.j?a.o?a.o[d]:void 0:a.l[d+a.s];{let e=!1;var f=null==c||"object"!==typeof c||(e=Array.isArray(c))||c.v!==D?e?new b(c):void 0:c}f!==c&&null!=f&&(K(a,d,f,!1),x(f.l,y(a.l)&18));b=f;if(null==b)return b;y(a.l)&2||(c=b,y(c.l)&2&&(f=M(c,!1),f.m=c,c=f),c!==b&&(b=c,K(a,d,b,!1)));return b};let N;function O(a,b){N=b;a=new a(b);N=void 0;return a};function ca(a){switch(typeof a){case "number":return isFinite(a)?a:String(a);case "object":if(a)if(Array.isArray(a)){if(0!==(y(a)&128))return a=Array.prototype.slice.call(a),I(a),a}else{if(r&&null!=a&&a instanceof Uint8Array)return q(a);if(a instanceof v){const b=a.B;return null==b?"":"string"===typeof b?b:a.B=q(b)}}}return a};function P(a,b,d,c){if(null!=a){if(Array.isArray(a))a=Q(a,b,d,void 0!==c);else if(E(a)){const f={};for(let e in a)f[e]=P(a[e],b,d,c);a=f}else a=b(a,c);return a}}function Q(a,b,d,c){const f=y(a);c=c?!!(f&16):void 0;a=Array.prototype.slice.call(a);for(let e=0;e<a.length;e++)a[e]=P(a[e],b,d,c);d(f,a);return a}function da(a){return a.v===D?a.toJSON():ca(a)}function ea(a,b){a&128&&I(b)};function R(a,b,d=C){if(null!=a){if(r&&a instanceof Uint8Array)return a.length?new v(new Uint8Array(a)):u||(u=new v(null));if(Array.isArray(a)){const c=y(a);if(c&2)return a;if(b&&!(c&32)&&(c&16||0===c))return z(a,c|2),a;a=Q(a,R,c&4?C:d,!0);b=y(a);b&4&&b&2&&Object.freeze(a);return a}return a.v===D?S(a):a}}
function T(a,b,d,c,f,e,g){if(a=a.i&&a.i[d]){c=y(a);c&2?c=a:(e=Array.prototype.map.call(a,S,void 0),C(c,e),Object.freeze(e),c=e);H(b);null==c?e=G:(e=[],x(e,1));g=e;if(null!=c){e=!!c.length;for(a=0;a<c.length;a++){const h=c[a];e=e&&!(y(h.l)&2);g[a]=h.l}e=(e?8:0)|1;a=y(g);(a&e)!==e&&(Object.isFrozen(g)&&(g=Array.prototype.slice.call(g)),z(g,a|e));b.i||(b.i={});b.i[d]=c}else b.i&&(b.i[d]=void 0);K(b,d,g,f)}else c=R(c,e,g),H(b),K(b,d,c,f)}
function S(a){if(y(a.l)&2)return a;a=M(a,!0);x(a.l,2);return a}function M(a,b){var d=a.l,c=A([]),f=a.constructor.i;f&&c.push(f);f=a.o;let e;f&&(c.length=d.length,c.fill(void 0,c.length,d.length),e={},c[c.length-1]=e);0!==(y(d)&128)&&I(c);b=b||y(a.l)&2?C:ba;c=O(a.constructor,c);a.A&&(c.A=a.A.slice());const g=!!(y(d)&16);var h=f?d.length-1:d.length;for(let k=0;k<h;k++)T(a,c,k-a.s,d[k],!1,g,b);if(f)for(const k in f)d=f[k],h=+k,Number.isNaN(h)?e[h]=d:T(a,c,h,d,!0,g,b);return c};function U(a,b){if(null==b||""==b)return new a;b=JSON.parse(b);if(!Array.isArray(b))throw Error(void 0);return O(a,A(b))}
var V=class{constructor(a,b,d){null==a&&(a=N);N=void 0;var c=this.constructor.j||0,f=0<c,e=this.constructor.i,g=!1;if(null==a){a=e?[e]:[];var h=48;var k=!0;f&&(c=0,h|=128);z(a,h)}else{if(!Array.isArray(a))throw Error();if(e&&e!==a[0])throw Error();let l=h=x(a,0);if(k=0!==(16&l))(g=0!==(32&l))||(l|=32);if(f)if(128&l)c=0;else{if(0<a.length){const B=a[a.length-1];if(E(B)&&"g"in B){c=0;l|=128;delete B.g;let Z=!0;for(let Ea in B){Z=!1;break}Z&&a.pop()}}}else if(128&l)throw Error();h!==l&&z(a,l)}this.s=
(e?0:-1)-c;this.i=void 0;this.l=a;a:{e=this.l.length;c=e-1;if(e&&(e=this.l[c],E(e))){this.o=e;this.j=c-this.s;break a}void 0!==b&&-1<b?(this.j=Math.max(b,c+1-this.s),this.o=void 0):this.j=Number.MAX_VALUE}if(!f&&this.o&&"g"in this.o)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(d){b=k&&!g&&!0;f=this.j;let l;for(k=0;k<d.length;k++)g=d[k],g<f?(g+=this.s,(c=a[g])?fa(c,b):a[g]=G):(l||(l=J(this)),(c=l[g])?fa(c,b):l[g]=G)}}toJSON(){return Q(this.l,da,ea)}clone(){return M(this,
!1)}};function fa(a,b){if(Array.isArray(a)){var d=y(a),c=1;!b||d&2||(c|=16);(d&c)!==c&&z(a,d|c)}}V.prototype.v=D;V.prototype.toString=function(){return this.l.toString()};var ia=class extends V{constructor(a){super(a,-1,ha)}},ha=[8];var ka=class extends V{constructor(a){super(a,-1,ja)}},ja=[17];var ma=class extends V{constructor(a){super(a,-1,la)}},la=[27];var na=class extends V{constructor(a){super(a)}};var pa=class extends V{constructor(a){super(a,-1,oa)}},oa=[1,2,3];function W(a,b){a=a.getElementsByTagName("META");for(let d=0;d<a.length;++d)if(a[d].getAttribute("name")===b)return a[d].getAttribute("content")||"";return""};function X(a,b){a=a.body;var d={detail:void 0};let c;"function"===typeof window.CustomEvent?c=new CustomEvent(b,d):(c=document.createEvent("CustomEvent"),c.initCustomEvent(b,!!d.bubbles,!!d.cancelable,d.detail));a.dispatchEvent(c)}
var qa=class{constructor(a){this.body=a;this.i=[];W(a,"sampling_mod");var b=W(a,"namespace");if(!b){b="ns-"+(0,Math.random)().toString(36).substr(2,5);a:{var d=a.getElementsByTagName("META");for(let c=0;c<d.length;++c)if("namespace"===d[c].getAttribute("name")&&d[c].getAttribute("index")===(0).toString()){d[c].setAttribute("content",b);break a}d=a.querySelector("#mys-meta");d||(d=document.createElement("div"),d.id="mys-meta",d.style.position="absolute",d.style.display="none",a.appendChild(d));a=document.createElement("META");
a.setAttribute("name","namespace");a.setAttribute("content",b);a.setAttribute("index",(0).toString());d.appendChild(a)}}if(!(0<this.i.length)){a=W(this.body,"environment");for(const c of a.split("|"))c&&this.i.push(c)}}addEventListener(a,b){this.body.addEventListener(a,b)}};function ra(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function sa(a){if(1>=a.j.offsetWidth||1>=a.j.offsetHeight)return!1;a.i.remove();X(a.context,"spanReady");return!0}
var ta=class{constructor(a){this.context=a;this.m={D:!1,C:100};this.j=ra("SPAN");this.i=ra("DIV");this.j.style.fontSize="6px";this.j.textContent="go";this.i.style.position="absolute";this.i.style.top="100%";this.i.style.left="100%";this.i.style.width="1px";this.i.style.height="0";this.i.style.overflow="hidden";this.i.style.visibility="hidden";this.i.appendChild(this.j)}wait(){if(!this.m.D&&(X(this.context,"spanStart"),this.context.body.appendChild(this.i),!sa(this)))return new Promise(a=>{const b=
setInterval(()=>{sa(this)&&(clearInterval(b),a())},this.m.C)})}};var ua=class{constructor(a,b){this.context=a;this.i=L(b,ma,1)||new ma;L(b,ia,12)||new ia;L(this.i,ka,10)||new ka}};function va(a){a.m.length=0;a.j=!0}function wa(a,b){a.i=!0;const d=()=>{a.j=!1;const c=a.m.shift();return void 0===c?(a.i=!1,Promise.resolve()):wa(a,c())};return b?b.then(d,()=>{if(a.j)return d();a.i=!1;return Promise.reject()}):d()}function xa(a,b){for(const d of b)a.m.push(d);if(!a.i)return wa(a)}var ya=class{constructor(){this.j=this.i=!1;this.m=[]}};function za(a){var b=W(a.context.body,"render_config")||"[]";b=U(na,b);return new ua(a.context,b)}function Aa(a){va(a.m);return xa(a.m,[()=>{let b;a.j||(a.j=za(a));b=(new ta(a.context)).wait();X(a.context,"browserStart");X(a.context,"browserStartEnd");a.i&=-31;a.i|=2;return b},()=>{X(a.context,"browserReady");X(a.context,"browserReadyEnd");a.i|=4;X(a.context,"overallReady")},()=>{X(a.context,"browserQuiet");X(a.context,"browserQuietEnd");a.i|=8}])}
function Ba(a){var b=W(a.context.body,"engine_msg")||"[]";U(pa,b);return Aa(a)||Promise.resolve()}function Ca(){var a=Y;a.i&=-31;a.i|=1;let b=0;const d=a.context.body;d.addEventListener("browserRender",()=>{++b;if(1===b)X(a.context,"overallStart"),Ba(a).then(()=>{X(a.context,"overallQuiet")});else{var c=d.clientHeight;d.clientWidth&&c&&(a.j||(a.j=za(a)),Ba(a))}})}var Da=class{constructor(a){this.m=new ya;this.i=0;this.context=new qa(a)}};let Y;m("mys.engine.init",(a,b)=>{Y=new Da(b);Ca()});m("mys.engine.stage",()=>{let a;return(null==(a=Y)?void 0:a.i)||0});}).call(this);
